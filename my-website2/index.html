<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="StreamFlix - Stream trending movies, TV shows, and anime">
  <title>StreamFlix | Movies & TV Shows</title>
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <!-- AutoTag Script -->
  <script type="text/javascript">
    aclib.runAutoTag({
        zoneId: 'mwuto3g5i',
    });
  </script>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">
  <style>
    /* Custom Properties / Variables */
    :root {
      --primary-color: #e50914;
      --primary-dark: #b2070f;
      --secondary-color: #00a8ff;
      --accent-color: #ff9f1c;
      --background-dark: #0f0f0f;
      --background-card: #1a1a1a;
      --background-elevated: #2d2d2d;
      --text-light: #ffffff;
      --text-muted: #b3b3b3;
      --text-dark: #333333;
      --success-color: #2ecc71;
      --warning-color: #f39c12;
      --error-color: #e74c3c;
      --gradient-primary: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      --gradient-hero: linear-gradient(135deg, rgba(229, 9, 20, 0.9), rgba(179, 7, 15, 0.9));
      --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.1);
      --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.2);
      --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.3);
      --border-radius: 12px;
      --border-radius-sm: 8px;
      --spacing-xs: 8px;
      --spacing-sm: 12px;
      --spacing-md: 20px;
      --spacing-lg: 32px;
      --spacing-xl: 48px;
      --font-family: 'Roboto', -apple-system, BlinkMacSystemFont, sans-serif;
    }

    /* Light Theme */
    [data-theme="light"] {
      --background-dark: #f8f9fa;
      --background-card: #ffffff;
      --background-elevated: #e9ecef;
      --text-light: #333333;
      --text-muted: #6c757d;
    }

    /* Global Reset and Typography */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: var(--font-family);
      background: var(--background-dark);
      color: var(--text-light);
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* Loading Screen */
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--background-dark);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 0.5s ease;
    }

    .loading-screen.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 4px solid rgba(229, 9, 20, 0.3);
      border-top: 4px solid var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: var(--spacing-md);
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Buttons */
    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: var(--border-radius-sm);
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
    }

    .btn-primary {
      background: var(--gradient-primary);
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-light);
      border: 2px solid rgba(255, 255, 255, 0.2);
    }

    .btn-secondary:hover {
      background: rgba(255, 255, 255, 0.2);
      border-color: rgba(255, 255, 255, 0.3);
    }

    .btn-outline {
      background: transparent;
      color: var(--text-light);
      border: 2px solid var(--text-muted);
    }

    .btn-outline:hover {
      border-color: var(--primary-color);
      color: var(--primary-color);
    }

    /* Navbar */
    .navbar {
      position: fixed;
      top: 0;
      width: 100%;
      background: rgba(15, 15, 15, 0.95);
      backdrop-filter: blur(10px);
      z-index: 1000;
      padding: var(--spacing-sm) 0;
      transition: all 0.3s ease;
    }

    .navbar.scrolled {
      background: rgba(15, 15, 15, 0.98);
      box-shadow: var(--shadow-md);
    }

    .nav-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 var(--spacing-md);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 24px;
      font-weight: 700;
      color: var(--primary-color);
      text-decoration: none;
    }

    .logo i {
      font-size: 28px;
    }

    .nav-links {
      display: flex;
      gap: var(--spacing-md);
    }

    .nav-link {
      color: var(--text-muted);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s ease;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .nav-link:hover, .nav-link.active {
      color: var(--primary-color);
    }

    .nav-actions {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
    }

    .search-container {
      position: relative;
      display: flex;
      align-items: center;
    }

    .search-bar {
      padding: 10px 16px;
      padding-right: 40px;
      border-radius: 25px;
      border: 2px solid rgba(255, 255, 255, 0.1);
      background: rgba(255, 255, 255, 0.05);
      color: var(--text-light);
      width: 280px;
      transition: all 0.3s ease;
    }

    .search-bar:focus {
      outline: none;
      border-color: var(--primary-color);
      width: 320px;
    }

    .search-icon {
      position: absolute;
      right: 10px;
      background: none;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      padding: 5px;
    }

    .theme-toggle {
      background: none;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      padding: 8px;
      border-radius: 50%;
      transition: all 0.3s ease;
    }

    .theme-toggle:hover {
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-light);
    }

    /* Hero Banner */
    .hero-banner {
      height: 80vh;
      position: relative;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      display: flex;
      align-items: center;
      margin-top: 70px;
    }

    .banner-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        to right,
        rgba(15, 15, 15, 0.9) 0%,
        rgba(15, 15, 15, 0.7) 50%,
        rgba(15, 15, 15, 0.4) 100%
      );
    }

    .banner-content {
      position: relative;
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 var(--spacing-md);
      z-index: 2;
    }

    .banner-title {
      font-size: 4rem;
      font-weight: 900;
      margin-bottom: var(--spacing-sm);
      background: linear-gradient(135deg, var(--text-light), var(--primary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .banner-description {
      font-size: 1.5rem;
      color: var(--text-muted);
      margin-bottom: var(--spacing-lg);
      max-width: 600px;
    }

    .banner-actions {
      display: flex;
      gap: var(--spacing-md);
    }

    /* Content Sections */
    .content-section {
      max-width: 1400px;
      margin: var(--spacing-xl) auto;
      padding: 0 var(--spacing-md);
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-lg);
    }

    .section-title {
      font-size: 2rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .section-controls {
      display: flex;
      gap: 10px;
    }

    .nav-btn {
      width: 40px;
      height: 40px;
      border: none;
      border-radius: 50%;
      background: var(--background-card);
      color: var(--text-light);
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .nav-btn:hover {
      background: var(--primary-color);
      transform: scale(1.1);
    }

    /* Media Scroller */
    .media-scroller {
      display: flex;
      gap: var(--spacing-sm);
      overflow-x: auto;
      scroll-behavior: smooth;
      padding: 10px 0;
      scrollbar-width: thin;
      scrollbar-color: var(--primary-color) transparent;
    }

    .media-scroller::-webkit-scrollbar {
      height: 8px;
    }

    .media-scroller::-webkit-scrollbar-track {
      background: transparent;
    }

    .media-scroller::-webkit-scrollbar-thumb {
      background: var(--primary-color);
      border-radius: 4px;
    }

    .media-card {
      min-width: 200px;
      background: var(--background-card);
      border-radius: var(--border-radius);
      overflow: hidden;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
    }

    .media-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: var(--shadow-lg);
    }

    .media-poster {
      width: 100%;
      height: 300px;
      object-fit: cover;
      transition: transform 0.3s ease;
    }

    .media-card:hover .media-poster {
      transform: scale(1.1);
    }

    .media-info {
      padding: var(--spacing-sm);
    }

    .media-title {
      font-weight: 600;
      margin-bottom: 5px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .media-meta {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .stars {
      color: gold;
    }

    /* Modal */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      padding: var(--spacing-md);
    }

    .modal-content {
      background: var(--background-card);
      border-radius: var(--border-radius);
      width: 100%;
      max-width: 1000px;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      box-shadow: var(--shadow-lg);
    }

    .close-btn {
      position: absolute;
      top: 15px;
      right: 15px;
      background: rgba(0, 0, 0, 0.7);
      border: none;
      color: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .close-btn:hover {
      background: var(--primary-color);
      transform: scale(1.1);
    }

    .modal-body {
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: var(--spacing-lg);
      padding: var(--spacing-lg);
    }

    .modal-poster-container {
      position: relative;
      border-radius: var(--border-radius);
      overflow: hidden;
    }

    .modal-poster {
      width: 100%;
      height: 450px;
      object-fit: cover;
      border-radius: var(--border-radius);
    }

    .poster-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .modal-poster-container:hover .poster-overlay {
      opacity: 1;
    }

    .modal-text {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-md);
    }

    .modal-item-title {
      font-size: 2.5rem;
      font-weight: 700;
      line-height: 1.2;
    }

    .modal-item-description {
      color: var(--text-muted);
      line-height: 1.6;
      font-size: 1.1rem;
    }

    .modal-actions {
      display: flex;
      gap: var(--spacing-sm);
      flex-wrap: wrap;
    }

    /* Season and Episode Selector */
    .season-episode-selector {
      margin: var(--spacing-md) 0;
      padding: var(--spacing-md);
      background: var(--background-elevated);
      border-radius: var(--border-radius-sm);
      display: none;
    }

    .selector-title {
      font-size: 1.2rem;
      margin-bottom: var(--spacing-sm);
      color: var(--text-light);
      font-weight: 600;
    }

    .selector-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: var(--spacing-sm);
      max-height: 400px;
      overflow-y: auto;
      padding: 5px;
    }

    .episode-card {
      background: var(--background-card);
      border-radius: var(--border-radius-sm);
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid transparent;
      position: relative;
    }

    .episode-card:hover {
      border-color: var(--primary-color);
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }

    .episode-card.active {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 2px var(--primary-color);
    }

    .episode-thumbnail {
      width: 100%;
      height: 100px;
      object-fit: cover;
      background: linear-gradient(135deg, #333, #555);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-muted);
    }

    .episode-thumbnail img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .episode-info {
      padding: var(--spacing-sm);
    }

    .episode-number {
      font-weight: 600;
      font-size: 0.9rem;
      color: var(--primary-color);
      margin-bottom: 4px;
    }

    .episode-name {
      font-size: 0.85rem;
      font-weight: 500;
      color: var(--text-light);
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      margin-bottom: 4px;
      line-height: 1.3;
    }

    .episode-overview {
      font-size: 0.75rem;
      color: var(--text-muted);
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      margin-bottom: 4px;
      line-height: 1.3;
    }

    .episode-airdate {
      font-size: 0.7rem;
      color: var(--text-muted);
    }

    .episode-rating {
      position: absolute;
      top: 8px;
      right: 8px;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 2px 6px;
      border-radius: 10px;
      font-size: 0.7rem;
      font-weight: 600;
    }

    .selector-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-sm);
    }

    .selector-nav-btn {
      background: var(--primary-color);
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: var(--border-radius-sm);
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    .selector-nav-btn:hover {
      background: var(--primary-dark);
    }

    .selector-nav-btn:disabled {
      background: var(--text-muted);
      cursor: not-allowed;
    }

    .current-season {
      font-weight: 600;
      color: var(--text-light);
      font-size: 1rem;
    }

    .streaming-section {
      padding: var(--spacing-lg);
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .server-selector {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
      margin-bottom: var(--spacing-md);
    }

    .server-label {
      font-weight: 600;
      color: var(--text-muted);
    }

    .server-select {
      padding: 8px 12px;
      border-radius: var(--border-radius-sm);
      background: var(--background-elevated);
      color: var(--text-light);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .video-container {
      border-radius: var(--border-radius);
      overflow: hidden;
      background: #000;
    }

    .modal-iframe {
      width: 100%;
      height: 400px;
      border: none;
    }

    /* Search Modal */
    .search-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      display: none;
      z-index: 2000;
    }

    .search-modal-content {
      max-width: 800px;
      margin: 100px auto 0;
      padding: var(--spacing-lg);
    }

    .search-header {
      text-align: center;
      margin-bottom: var(--spacing-lg);
    }

    .search-header h3 {
      font-size: 2rem;
      margin-bottom: var(--spacing-md);
    }

    .search-input-container {
      position: relative;
      max-width: 500px;
      margin: 0 auto;
    }

    .search-input-icon {
      position: absolute;
      left: 20px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-muted);
    }

    #search-input {
      width: 100%;
      padding: 16px 20px 16px 50px;
      border-radius: 50px;
      border: 2px solid rgba(255, 255, 255, 0.1);
      background: rgba(255, 255, 255, 0.05);
      color: var(--text-light);
      font-size: 1.1rem;
    }

    #search-input:focus {
      outline: none;
      border-color: var(--primary-color);
    }

    .search-results {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: var(--spacing-md);
      max-height: 60vh;
      overflow-y: auto;
      padding: 10px;
    }

    .empty-state {
      text-align: center;
      color: var(--text-muted);
      padding: var(--spacing-xl);
    }

    .empty-state i {
      font-size: 3rem;
      margin-bottom: var(--spacing-md);
    }

    /* Footer */
    .footer {
      background: var(--background-card);
      padding: var(--spacing-xl) 0 0;
      margin-top: var(--spacing-xl);
    }

    .footer-content {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 var(--spacing-md);
      display: grid;
      grid-template-columns: 1fr 2fr;
      gap: var(--spacing-xl);
    }

    .footer-brand .logo {
      font-size: 1.5rem;
      margin-bottom: var(--spacing-sm);
    }

    .footer-tagline {
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    .footer-links-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--spacing-lg);
    }

    .footer-column h4 {
      color: var(--text-light);
      margin-bottom: var(--spacing-md);
      font-size: 1.1rem;
    }

    .footer-column a {
      display: block;
      color: var(--text-muted);
      text-decoration: none;
      margin-bottom: 8px;
      transition: color 0.3s ease;
    }

    .footer-column a:hover {
      color: var(--primary-color);
    }

    .footer-bottom {
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      margin-top: var(--spacing-xl);
      padding: var(--spacing-md);
      text-align: center;
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    /* Back to Top */
    .back-to-top {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 50px;
      height: 50px;
      border: none;
      border-radius: 50%;
      background: var(--primary-color);
      color: white;
      cursor: pointer;
      display: none;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      z-index: 100;
      box-shadow: var(--shadow-md);
    }

    .back-to-top:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-lg);
    }

    /* Responsive Design */
    @media (max-width: 1024px) {
      .modal-body {
        grid-template-columns: 250px 1fr;
        gap: var(--spacing-md);
      }
      
      .banner-title {
        font-size: 3rem;
      }
      
      .selector-grid {
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      }
    }

    @media (max-width: 768px) {
      .navbar {
        padding: 10px 0;
      }
      
      .nav-container {
        flex-wrap: wrap;
        gap: 15px;
      }
      
      .nav-links {
        order: 3;
        flex-basis: 100%;
        justify-content: center;
      }
      
      .search-bar {
        width: 200px;
      }
      
      .search-bar:focus {
        width: 250px;
      }
      
      .hero-banner {
        height: 60vh;
        margin-top: 120px;
      }
      
      .banner-title {
        font-size: 2.5rem;
      }
      
      .banner-description {
        font-size: 1.2rem;
      }
      
      .banner-actions {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .modal-body {
        grid-template-columns: 1fr;
        text-align: center;
      }
      
      .selector-grid {
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      }
      
      .footer-content {
        grid-template-columns: 1fr;
        gap: var(--spacing-lg);
      }
      
      .footer-links-grid {
        grid-template-columns: 1fr;
        gap: var(--spacing-md);
      }
    }

    @media (max-width: 480px) {
      .content-section {
        margin: var(--spacing-lg) auto;
      }
      
      .section-title {
        font-size: 1.5rem;
      }
      
      .media-card {
        min-width: 150px;
      }
      
      .media-poster {
        height: 225px;
      }
      
      .search-results {
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      }
      
      .banner-title {
        font-size: 2rem;
      }
      
      .selector-grid {
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      }
      
      .episode-thumbnail {
        height: 80px;
      }
    }

    /* Disclaimer Modal Styles */
    .disclaimer-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      padding: var(--spacing-md);
    }

    .disclaimer-content {
      background: var(--background-card);
      border-radius: var(--border-radius);
      width: 100%;
      max-width: 800px;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      box-shadow: var(--shadow-lg);
    }

    .disclaimer-header {
      text-align: center;
      margin-bottom: var(--spacing-lg);
      border-bottom: 2px solid var(--primary-color);
      padding: var(--spacing-lg);
    }

    .disclaimer-title {
      color: var(--primary-color);
      font-size: 2.5rem;
      margin-bottom: var(--spacing-md);
    }

    .disclaimer-body {
      padding: var(--spacing-lg);
    }

    .disclaimer-section {
      margin-bottom: var(--spacing-lg);
    }

    .disclaimer-section h2 {
      color: var(--primary-color);
      border-left: 4px solid var(--primary-color);
      padding-left: var(--spacing-md);
      margin-bottom: var(--spacing-md);
    }

    .disclaimer-section p {
      margin-bottom: var(--spacing-md);
      color: var(--text-muted);
    }

    .disclaimer-list {
      padding-left: var(--spacing-lg);
      margin-bottom: var(--spacing-md);
    }

    .disclaimer-list li {
      margin-bottom: var(--spacing-md);
      color: var(--text-muted);
    }

    .warning-box {
      background: rgba(229, 9, 20, 0.1);
      border: 1px solid var(--primary-color);
      border-radius: 8px;
      padding: var(--spacing-md);
      margin: var(--spacing-lg) 0;
    }
  </style>
  <script id="aclib" type="text/javascript" src="//acscdn.com/script/aclib.js"></script>
</head>

<body>
  <!-- Loading Screen -->
  <div class="loading-screen" id="loading-screen">
    <div class="loading-spinner"></div>
    <p>Loading awesome content...</p>
  </div>

  <header class="navbar">
    <div class="nav-container">
      <a href="#" class="logo-link" aria-label="Go to homepage">
        <div class="logo">
          <i class="fas fa-play-circle"></i>
          <span>StreamFlix</span>
        </div>
      </a>
      <nav class="nav-links">
        <a href="#" aria-current="page" class="nav-link active">
          <i class="fas fa-home"></i> Home
        </a>
        <a href="#" class="nav-link">
          <i class="fas fa-fire"></i> Trending
        </a>
        <a href="#" class="nav-link">
          <i class="fas fa-heart"></i> Favorites
        </a>
      </nav>
      <div class="nav-actions">
        <div class="search-container">
          <input type="text" class="search-bar" placeholder="Search movies, shows..." 
                 aria-label="Search for movies or shows" onfocus="openSearchModal()" />
          <button class="search-icon" aria-label="Open search" onclick="openSearchModal()">
            <i class="fas fa-search"></i>
          </button>
        </div>
        <button class="theme-toggle" aria-label="Toggle dark mode" onclick="toggleTheme()">
          <i class="fas fa-moon"></i>
        </button>
      </div>
    </div>
  </header>

  <main>
    <!-- Hero Banner -->
    <section class="hero-banner" id="banner" role="banner">
      <div class="banner-overlay"></div>
      <div class="banner-content">
        <h1 id="banner-title" class="banner-title">Welcome to StreamFlix</h1>
        <p id="banner-description" class="banner-description">Discover thousands of movies and TV shows</p>
        <div class="banner-actions">
          <button class="btn btn-primary" onclick="openSearchModal()">
            <i class="fas fa-play"></i> Start Watching
          </button>
          <button class="btn btn-secondary" onclick="scrollToContent()">
            <i class="fas fa-info-circle"></i> Learn More
          </button>
        </div>
      </div>
    </section>

    <!-- Content Sections -->
    <section class="content-section" id="trending-section">
      <div class="section-header">
        <h2 class="section-title">
          <i class="fas fa-fire"></i> Trending Movies
        </h2>
        <div class="section-controls">
          <button class="nav-btn prev-btn" onclick="scrollList('movies-list', -300)">
            <i class="fas fa-chevron-left"></i>
          </button>
          <button class="nav-btn next-btn" onclick="scrollList('movies-list', 300)">
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </div>
      <div class="media-scroller" id="movies-list">
        <!-- Movies will be loaded here -->
      </div>
    </section>

    <section class="content-section">
      <div class="section-header">
        <h2 class="section-title">
          <i class="fas fa-tv"></i> Popular TV Shows
        </h2>
        <div class="section-controls">
          <button class="nav-btn prev-btn" onclick="scrollList('tvshows-list', -300)">
            <i class="fas fa-chevron-left"></i>
          </button>
          <button class="nav-btn next-btn" onclick="scrollList('tvshows-list', 300)">
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </div>
      <div class="media-scroller" id="tvshows-list">
        <!-- TV Shows will be loaded here -->
      </div>
    </section>

    <section class="content-section">
      <div class="section-header">
        <h2 class="section-title">
          <i class="fas fa-dragon"></i> Top Anime
        </h2>
        <div class="section-controls">
          <button class="nav-btn prev-btn" onclick="scrollList('anime-list', -300)">
            <i class="fas fa-chevron-left"></i>
          </button>
          <button class="nav-btn next-btn" onclick="scrollList('anime-list', 300)">
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </div>
      <div class="media-scroller" id="anime-list">
        <!-- Anime will be loaded here -->
      </div>
    </section>
  </main>

  <!-- Video Modal -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-content">
      <button class="close-btn" onclick="closeModal()" aria-label="Close movie details">
        <i class="fas fa-times"></i>
      </button>
      <div class="modal-body">
        <div class="modal-poster-container">
          <img id="modal-image" src="" alt="Poster image" class="modal-poster" />
          <div class="poster-overlay">
            <button class="btn btn-play" onclick="playTrailer()">
              <i class="fas fa-play"></i> Play Trailer
            </button>
          </div>
        </div>
        <div class="modal-text">
          <h2 id="modal-title" class="modal-item-title"></h2>
          <div class="media-meta">
            <div class="stars" id="modal-rating" aria-label="User rating"></div>
            <span class="rating-text" id="modal-rating-text"></span>
            <span class="release-date" id="modal-date"></span>
          </div>
          <p id="modal-description" class="modal-item-description"></p>
          <div class="modal-actions">
            <button class="btn btn-outline" onclick="addToFavorites()">
              <i class="far fa-heart"></i> Add to Favorites
            </button>
            <button class="btn btn-outline" onclick="shareMedia()">
              <i class="fas fa-share"></i> Share
            </button>
          </div>
        </div>
      </div>
      
      <!-- Season and Episode Selector (for TV series) -->
      <div class="season-episode-selector" id="season-episode-selector">
        <div class="selector-nav">
          <button class="selector-nav-btn" id="prev-season-btn" onclick="changeSeason(-1)">
            <i class="fas fa-chevron-left"></i> Previous Season
          </button>
          <div class="current-season" id="current-season-text">Season 1</div>
          <button class="selector-nav-btn" id="next-season-btn" onclick="changeSeason(1)">
            Next Season <i class="fas fa-chevron-right"></i>
          </button>
        </div>
        <div class="selector-title">Episodes</div>
        <div class="selector-grid" id="episodes-grid">
          <!-- Episodes will be loaded here -->
        </div>
      </div>
      
      <div class="streaming-section">
        <div class="server-selector">
          <label for="server" class="server-label">Choose Streaming Server:</label>
          <select id="server" onchange="changeServer()" class="server-select">
            <option value="vidsrc.cc">Server 1 (Vidsrc.cc)</option>
            <option value="vidsrc.net">Server 2 (Vidsrc.net)</option>
            <option value="player.videasy.net">Server 3 (Videasy.net)</option>
          </select>
        </div>
        <div class="video-container">
          <iframe id="modal-video" width="100%" height="400" frameborder="0" 
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                  allowfullscreen class="modal-iframe" title="Video Player"></iframe>
        </div>
      </div>
    </div>
  </div>

  <!-- Search Modal -->
  <div class="search-modal" id="search-modal" role="dialog" aria-modal="true">
    <div class="search-modal-content">
      <button class="close-btn search-close-btn" onclick="closeSearchModal()" aria-label="Close search">
        <i class="fas fa-times"></i>
      </button>
      <div class="search-header">
        <h3>What would you like to watch?</h3>
        <div class="search-input-container">
          <i class="fas fa-search search-input-icon"></i>
          <input type="text" id="search-input" placeholder="Search movies, TV shows, anime..." 
                 oninput="searchTMDB()" aria-label="Search input" />
        </div>
      </div>
      <div class="search-results" id="search-results">
        <div class="empty-state" id="search-empty">
          <i class="fas fa-search"></i>
          <p>Search for your favorite movies and TV shows</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Disclaimer Modal -->
  <div class="disclaimer-modal" id="disclaimer-modal" role="dialog" aria-modal="true">
    <div class="disclaimer-content">
      <button class="close-btn" onclick="closeDisclaimerModal()" aria-label="Close disclaimer">
        <i class="fas fa-times"></i>
      </button>
      <div class="disclaimer-header">
        <h1 class="disclaimer-title">StreamFlix Disclaimer</h1>
        <p>Important Legal Information for Users</p>
      </div>
      
      <div class="disclaimer-body">
        <div class="warning-box">
          <strong>‚ö†Ô∏è IMPORTANT NOTICE:</strong> StreamFlix is an educational demonstration project and should not be used for actual content streaming.
        </div>

        <div class="disclaimer-section">
          <h2>1. Educational Purpose Only</h2>
          <p>StreamFlix is created solely for educational and demonstration purposes. This platform is designed to showcase web development skills, API integration, and user interface design. It is not intended for commercial use or actual content distribution.</p>
        </div>

        <div class="disclaimer-section">
          <h2>2. Content Sources</h2>
          <p>The movie and TV show information displayed on StreamFlix is sourced from:</p>
          <ul class="disclaimer-list">
            <li><strong>The Movie Database (TMDB):</strong> We use TMDB's API to fetch movie metadata, posters, and descriptions</li>
            <li><strong>Third-party Streaming Services:</strong> Embedded players from external sources may be displayed for demonstration</li>
          </ul>
          <p>StreamFlix does not host, store, or distribute any video content on its servers.</p>
        </div>

        <div class="disclaimer-section">
          <h2>3. Copyright Notice</h2>
          <p>StreamFlix respects intellectual property rights and copyright laws:</p>
          <ul class="disclaimer-list">
            <li>All movie posters, descriptions, and metadata are property of their respective copyright holders</li>
            <li>Movie titles, TV show names, and related content are trademarks of their respective owners</li>
            <li>This project uses TMDB API but is not endorsed or certified by TMDB</li>
          </ul>
        </div>

        <div class="disclaimer-section">
          <h2>4. No Actual Streaming Service</h2>
          <p>Please note that:</p>
          <ul class="disclaimer-list">
            <li>StreamFlix does not provide actual streaming capabilities</li>
            <li>Embedded video players are for demonstration purposes only</li>
            <li>No video content is served from StreamFlix servers</li>
            <li>This is a front-end demonstration project</li>
          </ul>
        </div>

        <div class="disclaimer-section">
          <h2>5. User Responsibility</h2>
          <p>By using StreamFlix, you acknowledge and agree that:</p>
          <ul class="disclaimer-list">
            <li>You are using this platform for educational purposes only</li>
            <li>You understand this is not a real streaming service</li>
            <li>You will respect copyright laws in your jurisdiction</li>
            <li>You are responsible for ensuring your use complies with local laws</li>
          </ul>
        </div>

        <div class="disclaimer-section">
          <h2>6. Limitation of Liability</h2>
          <p>StreamFlix and its creators are not responsible for:</p>
          <ul class="disclaimer-list">
            <li>Any unauthorized use of copyrighted content</li>
            <li>Functionality of third-party embedded players</li>
            <li>Content accuracy or availability from external APIs</li>
            <li>Any legal issues arising from misuse of this platform</li>
          </ul>
        </div>

        <div class="disclaimer-section">
          <h2>7. Project Information</h2>
          <p><strong>Project Type:</strong> Educational/Demonstration</p>
          <p><strong>Technologies Used:</strong> HTML5, CSS3, JavaScript, TMDB API</p>
          <p><strong>Purpose:</strong> Showcase front-end development skills</p>
          <p><strong>Status:</strong> Non-commercial, open-source demonstration</p>
        </div>

        <div class="warning-box">
          <strong>üö´ LEGAL COMPLIANCE:</strong> Users are responsible for ensuring their use of this platform complies with all applicable laws in their jurisdiction. The creators of StreamFlix assume no liability for unauthorized use.
        </div>
      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="footer-content">
      <div class="footer-brand">
        <div class="logo">
          <i class="fas fa-play-circle"></i>
          <span>StreamFlix</span>
        </div>
        <p class="footer-tagline">Your gateway to unlimited entertainment</p>
      </div>
      <div class="footer-links-grid">
        <div class="footer-column">
          <h4>Browse</h4>
          <a href="#">Movies</a>
          <a href="#">TV Shows</a>
          <a href="#">Anime</a>
          <a href="#">Trending</a>
        </div>
        <div class="footer-column">
          <h4>Support</h4>
          <a href="#">Help Center</a>
          <a href="#">Contact Us</a>
          <a href="#">FAQ</a>
        </div>
        <div class="footer-column">
          <h4>Legal</h4>
          <a href="#" onclick="openDisclaimerModal()">Disclaimer</a>
          <a href="#">Privacy Policy</a>
          <a href="#">Terms of Service</a>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 StreamFlix. This is a demo project for educational purposes.</p>
      <p>This product uses the TMDB API but is not endorsed or certified by TMDB.</p>
    </div>
  </footer>

  <!-- Back to Top Button -->
  <button class="back-to-top" id="back-to-top" onclick="scrollToTop()">
    <i class="fas fa-chevron-up"></i>
  </button>

  <script>
    // --- Configuration Constants ---
    const API_CONFIG = {
      KEY: '420dd26414b8bcb319a5d49051b6ac25',
      BASE_URL: 'https://api.themoviedb.org/3',
      IMG_URL: 'https://image.tmdb.org/t/p/w500', // Using w500 for episode thumbnails (better size)
      IMG_ORIGINAL: 'https://image.tmdb.org/t/p/original',
    };

    // --- State Variables ---
    let currentItem = null;
    let currentTheme = 'dark';
    let currentSeasons = [];
    let currentSeasonNumber = 1;
    let currentEpisodes = [];
    let currentEpisodeNumber = 1;

    // --- Utility Functions ---

    /**
     * Shows loading screen
     */
    function showLoading() {
      document.getElementById('loading-screen').classList.remove('hidden');
    }

    /**
     * Hides loading screen
     */
    function hideLoading() {
      document.getElementById('loading-screen').classList.add('hidden');
    }

    /**
     * Formats date to readable string
     */
    function formatDate(dateString) {
      if (!dateString) return 'Unknown';
      const options = { year: 'numeric', month: 'long', day: 'numeric' };
      return new Date(dateString).toLocaleDateString(undefined, options);
    }

    /**
     * Toggles between dark and light theme
     */
    function toggleTheme() {
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', newTheme);
      currentTheme = newTheme;
      
      // Update theme toggle icon
      const themeIcon = document.querySelector('.theme-toggle i');
      themeIcon.className = currentTheme === 'dark' ? 'fas fa-moon' : 'fas fa-sun';
      
      // Save preference to localStorage
      localStorage.setItem('theme', newTheme);
    }

    /**
     * Scrolls to top of page
     */
    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    /**
     * Scrolls to content section
     */
    function scrollToContent() {
      document.getElementById('trending-section').scrollIntoView({ 
        behavior: 'smooth' 
      });
    }

    /**
     * Scrolls media lists horizontally
     */
    function scrollList(containerId, distance) {
      const container = document.getElementById(containerId);
      container.scrollBy({ left: distance, behavior: 'smooth' });
    }

    /**
     * Opens the disclaimer modal
     */
    function openDisclaimerModal() {
      document.getElementById('disclaimer-modal').style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }

    /**
     * Closes the disclaimer modal
     */
    function closeDisclaimerModal() {
      document.getElementById('disclaimer-modal').style.display = 'none';
      document.body.style.overflow = 'auto';
    }

    // --- TV Series Season/Episode Functions ---

    /**
     * Fetches TV series seasons and episodes
     */
    async function fetchTVSeasons(tvId) {
      try {
        const response = await fetch(
          `${API_CONFIG.BASE_URL}/tv/${tvId}?api_key=${API_CONFIG.KEY}`
        );
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        
        const data = await response.json();
        return data.seasons || [];
      } catch (error) {
        console.error(`Error fetching TV seasons:`, error);
        return [];
      }
    }

    /**
     * Fetches episodes for a specific season
     */
    async function fetchSeasonEpisodes(tvId, seasonNumber) {
      try {
        const response = await fetch(
          `${API_CONFIG.BASE_URL}/tv/${tvId}/season/${seasonNumber}?api_key=${API_CONFIG.KEY}`
        );
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        
        const data = await response.json();
        return data.episodes || [];
      } catch (error) {
        console.error(`Error fetching season episodes:`, error);
        return [];
      }
    }

    /**
     * Changes the current season
     */
    async function changeSeason(direction) {
      if (!currentSeasons.length) return;
      
      const newSeasonIndex = currentSeasons.findIndex(s => s.season_number === currentSeasonNumber) + direction;
      
      if (newSeasonIndex >= 0 && newSeasonIndex < currentSeasons.length) {
        currentSeasonNumber = currentSeasons[newSeasonIndex].season_number;
        await loadSeasonEpisodes(currentItem.id, currentSeasonNumber);
        updateSeasonNavigation();
      }
    }

    /**
     * Loads episodes for a season
     */
    async function loadSeasonEpisodes(tvId, seasonNumber) {
      const episodes = await fetchSeasonEpisodes(tvId, seasonNumber);
      currentEpisodes = episodes;
      displayEpisodes(episodes);
      document.getElementById('current-season-text').textContent = `Season ${seasonNumber}`;
      
      // Auto-select first episode
      if (episodes.length > 0) {
        selectEpisode(1);
      }
    }

    /**
     * Displays episodes in the selector with thumbnails
     */
    function displayEpisodes(episodes) {
      const container = document.getElementById('episodes-grid');
      container.innerHTML = '';
      
      if (episodes.length === 0) {
        container.innerHTML = `
          <div class="empty-state" style="grid-column: 1 / -1;">
            <i class="fas fa-tv"></i>
            <p>No episodes available for this season</p>
          </div>
        `;
        return;
      }
      
      episodes.forEach(episode => {
        const episodeCard = document.createElement('div');
        episodeCard.className = 'episode-card';
        if (episode.episode_number === currentEpisodeNumber) {
          episodeCard.classList.add('active');
        }
        episodeCard.onclick = () => selectEpisode(episode.episode_number);
        
        // Use episode still if available, otherwise use a placeholder
        const thumbnailUrl = episode.still_path 
          ? `${API_CONFIG.IMG_URL}${episode.still_path}`
          : null;
        
        const rating = episode.vote_average ? episode.vote_average.toFixed(1) : 'N/A';
        
        episodeCard.innerHTML = `
          <div class="episode-thumbnail">
            ${thumbnailUrl 
              ? `<img src="${thumbnailUrl}" alt="${episode.name || 'Episode ' + episode.episode_number}" loading="lazy" />`
              : `<i class="fas fa-play-circle" style="font-size: 2rem;"></i>`
            }
            ${rating !== 'N/A' ? `<div class="episode-rating">${rating}</div>` : ''}
          </div>
          <div class="episode-info">
            <div class="episode-number">Episode ${episode.episode_number}</div>
            <div class="episode-name">${episode.name || 'Episode ' + episode.episode_number}</div>
            ${episode.overview ? `<div class="episode-overview">${episode.overview}</div>` : ''}
            <div class="episode-airdate">${formatDate(episode.air_date)}</div>
          </div>
        `;
        
        container.appendChild(episodeCard);
      });
    }

    /**
     * Selects an episode
     */
    function selectEpisode(episodeNumber) {
      currentEpisodeNumber = episodeNumber;
      
      // Update UI
      const episodeCards = document.querySelectorAll('.episode-card');
      episodeCards.forEach(card => {
        const episodeNumText = card.querySelector('.episode-number').textContent;
        const episodeNum = parseInt(episodeNumText.replace('Episode ', ''));
        card.classList.toggle('active', episodeNum === episodeNumber);
      });
      
      // Update video if it's a TV series
      if (currentItem && (currentItem.media_type === 'tv' || currentItem.name)) {
        changeServer();
      }
    }

    /**
     * Updates season navigation buttons
     */
    function updateSeasonNavigation() {
      const prevBtn = document.getElementById('prev-season-btn');
      const nextBtn = document.getElementById('next-season-btn');
      
      if (!currentSeasons.length) return;
      
      const currentIndex = currentSeasons.findIndex(s => s.season_number === currentSeasonNumber);
      prevBtn.disabled = currentIndex === 0;
      nextBtn.disabled = currentIndex === currentSeasons.length - 1;
    }

    // --- API Fetching Functions ---

    /**
     * Fetches trending movies or TV shows from TMDB.
     */
    async function fetchTrending(type) {
      try {
        const response = await fetch(
          `${API_CONFIG.BASE_URL}/trending/${type}/week?api_key=${API_CONFIG.KEY}`
        );
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        
        const data = await response.json();
        return data.results || [];
      } catch (error) {
        console.error(`Error fetching trending ${type}:`, error);
        return [];
      }
    }

    /**
     * Fetches trending anime by filtering Japanese animation.
     */
    async function fetchTrendingAnime() {
      let allResults = [];
      const MAX_PAGES = 3;
      const ANIME_GENRE_ID = 16;

      for (let page = 1; page <= MAX_PAGES; page++) {
        try {
          const response = await fetch(
            `${API_CONFIG.BASE_URL}/trending/tv/week?api_key=${API_CONFIG.KEY}&page=${page}`
          );
          if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
          
          const data = await response.json();
          const filtered = data.results.filter(item =>
            item.original_language === 'ja' &&
            item.genre_ids && item.genre_ids.includes(ANIME_GENRE_ID)
          );
          
          allResults = allResults.concat(filtered);
        } catch (error) {
          console.error(`Error fetching anime page ${page}:`, error);
        }
      }

      return allResults;
    }

    // --- DOM Manipulation / Display Functions ---

    /**
     * Displays the hero banner with random content.
     */
    function displayBanner(item) {
      const bannerElement = document.getElementById('banner');
      const titleElement = document.getElementById('banner-title');
      const descElement = document.getElementById('banner-description');
      
      if (item && item.backdrop_path) {
        bannerElement.style.backgroundImage = `url(${API_CONFIG.IMG_ORIGINAL}${item.backdrop_path})`;
        titleElement.textContent = item.title || item.name || 'StreamFlix';
        descElement.textContent = item.overview 
          ? (item.overview.substring(0, 150) + '...') 
          : 'Discover thousands of movies and TV shows';
      }
    }

    /**
     * Creates a media card element.
     */
    function createMediaCard(item) {
      if (!item.poster_path) return null;

      const card = document.createElement('div');
      card.className = 'media-card';
      card.setAttribute('role', 'button');
      card.setAttribute('tabindex', '0');
      
      card.innerHTML = `
        <img src="${API_CONFIG.IMG_URL}${item.poster_path}" 
             alt="Poster for ${item.title || item.name}" 
             class="media-poster" />
        <div class="media-info">
          <h3 class="media-title">${item.title || item.name}</h3>
          <div class="media-meta">
            <div class="stars">${renderRating(item.vote_average)}</div>
            <span>${(item.vote_average / 2).toFixed(1)}</span>
          </div>
        </div>
      `;

      // Add click and keyboard events
      const clickHandler = () => showDetails(item);
      card.onclick = clickHandler;
      card.onkeydown = (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          clickHandler();
        }
      };

      return card;
    }

    /**
     * Populates a media list with cards.
     */
    function displayList(items, containerId) {
      const container = document.getElementById(containerId);
      if (!container) return;

      container.innerHTML = '';
      items.forEach(item => {
        const card = createMediaCard(item);
        if (card) container.appendChild(card);
      });
    }

    /**
     * Renders star rating based on vote average.
     */
    function renderRating(voteAverage) {
      const ratingOutOfFive = Math.round(voteAverage / 2);
      return '‚òÖ'.repeat(ratingOutOfFive) + '‚òÜ'.repeat(5 - ratingOutOfFive);
    }

    // --- Modal and Details Logic ---

    /**
     * Shows detailed modal for selected media item.
     */
    async function showDetails(item) {
      currentItem = item;
      
      // Reset season/episode state
      currentSeasons = [];
      currentSeasonNumber = 1;
      currentEpisodes = [];
      currentEpisodeNumber = 1;
      
      // Set media details
      document.getElementById('modal-title').textContent = item.title || item.name;
      document.getElementById('modal-description').textContent = 
        item.overview || 'No description available.';
      document.getElementById('modal-image').src = 
        `${API_CONFIG.IMG_ORIGINAL}${item.poster_path}`;
      document.getElementById('modal-image').alt = 
        `Poster for ${item.title || item.name}`;
      
      // Set additional metadata
      document.getElementById('modal-rating').innerHTML = renderRating(item.vote_average);
      document.getElementById('modal-rating-text').textContent = 
        `${(item.vote_average / 2).toFixed(1)}/5`;
      document.getElementById('modal-date').textContent = 
        formatDate(item.release_date || item.first_air_date);
      
      // Handle TV series season/episode selector
      const seasonEpisodeSelector = document.getElementById('season-episode-selector');
      if (item.media_type === 'tv' || item.name) {
        // It's a TV series
        seasonEpisodeSelector.style.display = 'block';
        
        // Fetch seasons
        currentSeasons = await fetchTVSeasons(item.id);
        
        // Filter out seasons with 0 episodes
        currentSeasons = currentSeasons.filter(season => season.episode_count > 0 && season.season_number > 0);
        
        if (currentSeasons.length > 0) {
          // Load first season episodes
          await loadSeasonEpisodes(item.id, currentSeasons[0].season_number);
          updateSeasonNavigation();
        } else {
          // No seasons available
          seasonEpisodeSelector.innerHTML = `
            <div class="empty-state">
              <i class="fas fa-tv"></i>
              <p>No seasons available for this series</p>
            </div>
          `;
        }
      } else {
        // It's a movie
        seasonEpisodeSelector.style.display = 'none';
      }
      
      // Reset server and load video
      document.getElementById('server').value = 'vidsrc.cc';
      changeServer();
      
      // Show modal
      document.getElementById('modal').style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }

    /**
     * Updates video iframe based on selected server.
     */
    function changeServer() {
      if (!currentItem) return;

      const server = document.getElementById('server').value;
      const type = (currentItem.media_type === "movie" || currentItem.title) ? "movie" : "tv";
      let embedURL = "";

      if (server === "vidsrc.cc") {
        if (type === "tv") {
          embedURL = `https://vidsrc.cc/v2/embed/tv/${currentItem.id}/${currentSeasonNumber}/${currentEpisodeNumber}`;
        } else {
          embedURL = `https://vidsrc.cc/v2/embed/movie/${currentItem.id}`;
        }
      } else if (server === "vidsrc.net") {
        if (type === "tv") {
          embedURL = `https://vidsrc.net/embed/tv/?tmdb=${currentItem.id}&season=${currentSeasonNumber}&episode=${currentEpisodeNumber}`;
        } else {
          embedURL = `https://vidsrc.net/embed/movie/?tmdb=${currentItem.id}`;
        }
      } else if (server === "player.videasy.net") {
        if (type === "tv") {
          embedURL = `https://player.videasy.net/tv/${currentItem.id}/${currentSeasonNumber}/${currentEpisodeNumber}`;
        } else {
          embedURL = `https://player.videasy.net/movie/${currentItem.id}`;
        }
      }

      document.getElementById('modal-video').src = embedURL;
    }

    /**
     * Closes the details modal.
     */
    function closeModal() {
      document.getElementById('modal').style.display = 'none';
      document.getElementById('modal-video').src = '';
      document.body.style.overflow = 'auto';
    }

    // --- Search Functionality ---

    /**
     * Opens search modal.
     */
    function openSearchModal() {
      document.getElementById('search-modal').style.display = 'block';
      document.getElementById('search-input').focus();
      document.body.style.overflow = 'hidden';
    }

    /**
     * Closes search modal.
     */
    function closeSearchModal() {
      document.getElementById('search-modal').style.display = 'none';
      document.getElementById('search-results').innerHTML = '';
      document.getElementById('search-input').value = '';
      document.body.style.overflow = 'auto';
    }

    /**
     * Searches TMDB and displays results.
     */
    async function searchTMDB() {
      const query = document.getElementById('search-input').value.trim();
      const container = document.getElementById('search-results');
      const emptyState = document.getElementById('search-empty');
      
      if (!query) {
        container.innerHTML = '';
        if (emptyState) container.appendChild(emptyState);
        return;
      }

      // Remove empty state during search
      if (emptyState) emptyState.remove();

      try {
        const response = await fetch(
          `${API_CONFIG.BASE_URL}/search/multi?api_key=${API_CONFIG.KEY}&query=${encodeURIComponent(query)}`
        );
        if (!response.ok) throw new Error(`Search error! status: ${response.status}`);
        
        const data = await response.json();
        container.innerHTML = '';

        const validResults = data.results.filter(item =>
          item.media_type !== 'person' &&
          (item.poster_path || item.backdrop_path) &&
          (item.title || item.name)
        );

        if (validResults.length === 0) {
          container.innerHTML = `
            <div class="empty-state">
              <i class="fas fa-search"></i>
              <p>No results found for "${query}"</p>
            </div>
          `;
          return;
        }

        validResults.forEach(item => {
          const card = createMediaCard(item);
          if (card) {
            // Update click handler to close search modal first
            const originalClick = card.onclick;
            card.onclick = () => {
              closeSearchModal();
              originalClick();
            };
            container.appendChild(card);
          }
        });

      } catch (error) {
        console.error("Search error:", error);
        container.innerHTML = `
          <div class="empty-state">
            <i class="fas fa-exclamation-triangle"></i>
            <p>Search failed. Please try again.</p>
          </div>
        `;
      }
    }

    // --- Event Listeners and Initialization ---

    /**
     * Sets up event listeners.
     */
    function setupEventListeners() {
      // Close modals on outside click
      document.addEventListener('click', (e) => {
        const modal = document.getElementById('modal');
        const searchModal = document.getElementById('search-modal');
        const disclaimerModal = document.getElementById('disclaimer-modal');
        
        if (e.target === modal) closeModal();
        if (e.target === searchModal) closeSearchModal();
        if (e.target === disclaimerModal) closeDisclaimerModal();
      });

      // Close modals on Escape key
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          closeModal();
          closeSearchModal();
          closeDisclaimerModal();
        }
      });

      // Show back-to-top button on scroll
      window.addEventListener('scroll', () => {
        const backToTop = document.getElementById('back-to-top');
        const navbar = document.querySelector('.navbar');
        
        if (window.scrollY > 300) {
          backToTop.style.display = 'flex';
          navbar.classList.add('scrolled');
        } else {
          backToTop.style.display = 'none';
          navbar.classList.remove('scrolled');
        }
      });

      // Search on Enter key
      document.getElementById('search-input').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') searchTMDB();
      });
    }

    /**
     * Loads saved theme preference.
     */
    function loadThemePreference() {
      const savedTheme = localStorage.getItem('theme') || 'dark';
      currentTheme = savedTheme;
      document.documentElement.setAttribute('data-theme', savedTheme);
      
      const themeIcon = document.querySelector('.theme-toggle i');
      themeIcon.className = savedTheme === 'dark' ? 'fas fa-moon' : 'fas fa-sun';
    }

    /**
     * Main initialization function.
     */
    async function init() {
      showLoading();
      loadThemePreference();
      setupEventListeners();

      try {
        const [movies, tvShows, anime] = await Promise.all([
          fetchTrending('movie'),
          fetchTrending('tv'),
          fetchTrendingAnime()
        ]);

        // Display banner with random content
        if (movies.length > 0) {
          const randomMovie = movies[Math.floor(Math.random() * movies.length)];
          displayBanner(randomMovie);
        }

        // Display all lists
        displayList(movies, 'movies-list');
        displayList(tvShows, 'tvshows-list');
        displayList(anime, 'anime-list');

      } catch (error) {
        console.error('Initialization error:', error);
      } finally {
        setTimeout(hideLoading, 1000); // Ensure loading screen shows briefly
      }

      // Expose functions globally
      window.closeModal = closeModal;
      window.changeServer = changeServer;
      window.openSearchModal = openSearchModal;
      window.closeSearchModal = closeSearchModal;
      window.searchTMDB = searchTMDB;
      window.toggleTheme = toggleTheme;
      window.scrollToTop = scrollToTop;
      window.scrollToContent = scrollToContent;
      window.scrollList = scrollList;
      window.openDisclaimerModal = openDisclaimerModal;
      window.closeDisclaimerModal = closeDisclaimerModal;
      window.changeSeason = changeSeason;
      window.selectEpisode = selectEpisode;
      window.playTrailer = () => alert('Trailer feature coming soon!');
      window.addToFavorites = () => alert('Added to favorites!');
      window.shareMedia = () => alert('Share feature coming soon!');
    }

    // Start the application when DOM is loaded
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
